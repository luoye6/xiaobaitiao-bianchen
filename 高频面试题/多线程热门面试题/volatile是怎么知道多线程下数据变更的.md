# volatile是怎么知道多线程下数据变更的

> 本文作者：[程序员小白条](https://github.com/luoye6)
>
> 本站地址：[https://xbt.xiaobaitiao.top](https://xbt.xiaobaitiao.top)

volatile 关键字用于标记一个变量是 volatile 的，这意味着这个变量的值可能会被多个线程同时修改，因此需要及时更新到内存中，以确保其他线程能够及时看到值的变化。

- 当一个线程访问一个 volatile 变量时，Java 虚拟机会自动将该变量的值复制到线程本地内存中，以便其他线程能够访问该变量的值。当一个线程修改了 volatile 变量的值后，Java 虚拟机也会自动将修改后的值复制回线程本地内存中，以便其他线程能够更新他们的本地内存。
- 由于 volatile 变量的值会被及时更新到内存中，因此其他线程可以及时看到该变量的值发生变化。如果一个变量不是 volatile 的，那么其他线程只能读取该变量的先前值，而不能直接读取最新的值，因为这样需要从磁盘或者其他慢速存储介质中读取数据，会降低程序的性能。
- 需要注意的是，虽然 volatile 能够确保多线程下数据变更的正确性，但它并不能保证线程的安全性。如果在多线程环境下，修改一个非 volatile 变量的值可能会引起竞态条件等问题，因此需要谨慎使用 volatile 关键字。