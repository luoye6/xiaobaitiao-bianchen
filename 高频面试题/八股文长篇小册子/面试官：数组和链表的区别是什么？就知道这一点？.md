# 面试官：数组和链表的区别是什么？就知道这一点？

> 本文作者：[程序员小白条](https://github.com/luoye6)
>
> 本站地址：[https://xbt.xiaobaitiao.top](https://xbt.xiaobaitiao.top)

**面试官**：看你简历上写了不少算法和数据结构相关的项目，我们来聊聊基础的数据结构吧。你能说说数组和链表的区别吗？

**我**：数组和链表啊...数组是连续存储的，链表是通过指针连接的...具体的区别我有点记不清了。

<img src="https://pic.yupi.icu/5563/202511091321097.png" style="zoom:33%;" />

## 解析答案

### 从内存结构看本质区别

**数组**就像一排连续的储物柜，每个柜子都有固定的编号，你可以通过编号直接找到对应的柜子。

**链表**则像是一串珍珠项链，每颗珍珠都知道下一颗珍珠在哪里，但要找到特定的珍珠，必须从第一颗开始一颗颗找过去。

### 数组：有序的连续空间

#### 核心特点

数组在内存中是**连续存储**的，这意味着：

- 所有元素肩并肩排排坐，没有空隙
- 通过数学计算就能直接定位任意元素：`地址 = 首地址 + 索引 × 元素大小`
- 这种结构让随机访问变得极快，时间复杂度为 O(1)

#### 优势与代价

**优势：**

-  **闪电般的访问速度**：想找第几个元素？直接去拿！
- **内存利用率高**：没有额外的指针开销
-  **CPU缓存友好**：连续内存便于预加载，提升访问速度

**代价：**

- **大小固定**：创建时就要确定容量，不够灵活
- **插入删除麻烦**：在中间操作需要"大搬家"，时间复杂度 O(n)

#### 实际应用场景

```java
// 适合使用数组的场景：需要频繁随机访问
int[] scores = new int[100];  // 学生成绩表
ImagePixel[][] imageData = new ImagePixel[1920][1080];  // 图像像素数据
```

### 链表：灵活的链式结构

#### 核心特点

链表通过指针将分散的内存块连接起来：

- 每个节点包含数据和指向下一个节点的指针
- 节点在内存中可以是分散的
- 访问需要从头开始遍历，时间复杂度 O(n)

#### 三种常见形式

1. **单向链表**：只能向前，不能后退
2. **双向链表**：前后都能走，更加灵活
3. **循环链表**：首尾相连，形成环状

#### 优势与代价

**优势：**

-  **动态扩容**：随时添加新节点，不受固定大小限制
-  **高效插入删除**：改个指针就行，时间复杂度 O(1)
-  **内存灵活**：不需要大块连续内存

**代价：**

- **访问速度慢**：找特定元素需要从头遍历
- **内存开销大**：每个节点都要存储指针
- **缓存不友好**：分散存储导致缓存命中率低

#### 实际应用场景

```java
// 适合使用链表的场景：频繁插入删除
LinkedList<LogEntry> logEntries = new LinkedList<>();  // 系统日志
LinkedList<UndoAction> undoStack = new LinkedList<>();  // 撤销操作栈
```

### 性能对比：谁更适合你的需求？

| 特性     | 数组                      | 链表            |
| :------- | :------------------------ | :-------------- |
| 随机访问 | O(1) - 极快               | O(n) - 较慢     |
| 头部插入 | O(1) - 索引获取           | O(1) - 直接插入 |
| 尾部插入 | O(1) - 插入 O(1) 检索O(n) | O(1) - 直接添加 |
| 中间插入 | O(1) - 插入 O(1) 检索O(n) | O(N) - 需要移动 |
| 内存使用 | 紧凑高效                  | 有指针开销      |
| 缓存友好 | 很好                      | 较差            |

### 什么时候用谁？

**选择数组当：**

- 需要频繁随机访问元素
- 数据量相对固定，变化不大
- 追求极致的访问性能
- 内存空间比较紧张

**选择链表当：**

- 需要频繁在头部或中间插入删除
- 数据量变化很大，无法预估
- 内存碎片化严重，难以分配大块连续内存
- 需要实现栈、队列等数据结构

### 缓存机制的深远影响

现代CPU的多级缓存让数组的优势更加明显：

- **空间局部性**：访问数组元素时，相邻元素很可能也在缓存中
- **预加载机制**：CPU会预读连续内存，提升后续访问速度
- **缓存行优化**：一次缓存加载可以拿到多个数组元素

这就是为什么在性能敏感的场景中，数组往往比链表表现更好。

<img src="https://pic.yupi.icu/5563/202511091326250.png" style="zoom:25%;" />

## 欢迎交流

通过本文的讲解，相信你已经对数组和链表的区别有了清晰的认识。在实际开发中，选择合适的数据结构往往能带来显著的性能提升。以下几个问题可以帮助你进一步思考：

1. 在实现LRU缓存时，为什么通常选择链表而不是数组？
2. 如果需要在数据中间频繁插入删除，但又需要快速随机访问，有什么折中的方案？
3. 在并发环境下，数组和链表各自面临什么样的挑战？

欢迎在评论区分享你的见解和实战经验！