# 聚簇索引和非聚簇索引

> 本文作者：[程序员小白条](https://github.com/luoye6)
>
> 本站地址：[https://xbt.xiaobaitiao.top](https://xbt.xiaobaitiao.top)

聚簇索引和非聚簇索引都用的是 B + 树。

聚簇索引

聚簇索引又称为主索引，是一种物理排序的索引，它决定了表中数据的物理存储顺序。是一种数据存储方式。

每个InnoDB表都有一个聚簇索引 ，**聚簇索引使用B+树构建**，**叶子节点存储的数据是整行记录**。一般情况下，聚簇索引等同于主键索引，当一个表没有创建主键索引时，InnoDB会**自动创建一个ROWID字段**来构建聚簇索引。

除聚簇索引之外的所有索引都称为辅助索引。在中InnoDB，**辅助索引中的叶子节点存储的数据是该行的主键值。**在检索时，InnoDB使用此主键值在聚簇索引中搜索行记录。

MyISAM引擎的索引文件和数据文件是分离的。**MyISAM引擎索引结构的叶子节点的数据域，存放的并不是实际的数据记录，而是数据记录的地址。**索引文件与数据文件分离，这样的索引称为"非聚簇索引"。MyISAM的主索引与辅助索引区别并不大，只是主键索引不能有重复的关键字。

非聚簇索引

非聚簇索引又称为辅助索引，不影响表中数据的物理存储顺序。非聚簇索引的叶子节点存储的是索引键值以及指向数据行的指针，因此需要通过索引键值查找数据行。一个表可以有多个非聚簇索引。

聚簇索引和非聚簇索引的使用场景不同，需要根据具体的应用场景来选择。一般来说，如果需要经常进行范围查询或聚合计算，那么就应该使用聚簇索引。如果需要经常用于查询和排序，那么就应该使用非聚簇索引。

需要注意的是，虽然聚簇索引的查询速度快，但是由于每次插入和更新数据都会改变数据的物理存储顺序，因此会影响性能。在使用聚簇索引时，需要避免频繁的插入和更新操作。同时，在选择索引类型时，需要根据具体的应用场景和需求来综合考虑。