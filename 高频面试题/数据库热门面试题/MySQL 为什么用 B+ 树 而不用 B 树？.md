# MySQL 为什么用 B+ 树 而不用 B 树？

> 本文作者：[程序员小白条](https://github.com/luoye6)
>
> 本站地址：[https://xbt.xiaobaitiao.top](https://xbt.xiaobaitiao.top)

B-树在提高了IO性能的同时并没有解决元素遍历的低下的问题，然而B+树只需要去遍历叶子节点就可以实现遍历整棵树。由于数据库中基于范围的查找是非常频繁的，B树的查找效率就很低下。

主要原因：

1.B+树的磁盘读写代价更低：B-树/B+树的特点就是每层节点数目非常多，层数很少，目的就是为了减少磁盘IO次数，B+树的内部节点并没有指向关键字具体信息的指针，因此其内部节点相对于B-树更小，但是B-树的每个节点都有数据域，这就无形之中增加了节点的大小，也就是说增加了磁盘IO次数。然而B+树除了叶子节点外其他阶段并不存储数据，节点小，磁盘IO次数就降低了。

2.B+树的查询效率更加稳定：B+树只有叶节点存放数据，其余节点用来索引，所以任何关键字的查找必须走一条从根节点道叶子节点的路，所以关键字查询的路径长度相同，导致每个数据的查询效率相当。然而B-树中每个索引节点都会有数据域。

3.B+树由于它所有的数据域都在叶子节点上，并且所有叶子节点之间都有一个链指针。这样遍历叶子节点就能获得全部数据，这样就能进行区间访问啦。在数据库中基于范围的查询就很频繁，然而B树就不支持这样的遍历操作。因为其分支节点同样存储着数据，要找到具体的数据，需要进行一次中序遍历按序来扫，所以B+树更加适合在区间查询的情况。因此B+树更适合用于数据库索引。



1.Mysql衡量查询效率指标之一磁盘IO次数，B+树节点小，磁盘IO次数少

B-树和B+树最重要的区别：B+树只有叶节点存放数据，其余节点用来索引，而B-树是每个索引节点都会有Data域。



这就决定了B+树更适合用来存储外部数据，也就是所谓的磁盘数据。

从Mysql（Inoodb）的角度来看，B+树是用来充当索引的，一般来说索引非常大，所以为了减少内存的占用，索引也会被存储在磁盘上。



B类树的特点就是每层节点数目非常多，层数很少，目的就是为了就少磁盘IO次数。



当查询数据的时候，最好的情况就是很快找到目标索引，然后读取数据，使用B+树就能很好的完成这个目的。



B-树的每个节点都有data域（指针），这增大了节点大小，增加了磁盘IO次数（磁盘IO一次读出的数据量大小是固定的，单个数据变大，每次读出的就少，IO次数增多），而B+树除了叶子节点其它节点并不存储数据，节点小，磁盘IO次数就少。



2.B+树更擅长范围查询

B+树所有的Data域在叶子节点，所有的叶子节点用指针串起来形成双向链表。这样遍历叶子节点就能获得全部数据，这样就方便范围查询。



B-树范围查询只能中序遍历